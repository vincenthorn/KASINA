/* Kasina orb animations */

/* Fixed orb in focus mode */
.fixed-orb {
  transform: none !important;
  animation-name: none !important;
}

.fixed-orb::before,
.fixed-orb::after {
  animation-play-state: running !important;
}

/* Orb wrapper to ensure proper centering */
.orb-wrapper {
  transform-style: preserve-3d;
}

/* Water kasina animation - liquid blue water that morphs through different shades */
.water-animation {
  animation: water-pulse 8s infinite alternate;
  box-shadow: 0 0 25px rgba(0, 153, 255, 0.7);
  position: relative;
  overflow: hidden;
}

.water-animation::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  opacity: 0.7;
  animation: 
    water-color-morph 150s infinite alternate ease-in-out,
    water-move 125s infinite linear;
  transform-origin: center;
}

/* Add rippling water surface overlay */
.water-animation::after {
  content: '';
  position: absolute;
  top: -10%;
  left: -10%;
  width: 120%;
  height: 120%;
  border-radius: 50%;
  background: 
    radial-gradient(
      circle, 
      rgba(255, 255, 255, 0.15) 0%, 
      rgba(255, 255, 255, 0.08) 30%, 
      transparent 70%
    );
  opacity: 0.25;
  animation: water-surface 125s infinite linear;
  pointer-events: none;
}

@keyframes water-pulse {
  0% {
    filter: brightness(0.9) saturate(0.9);
    transform: scale(1);
  }
  50% {
    filter: brightness(1.1) saturate(1.1);
    transform: scale(1.02);
  }
  100% {
    filter: brightness(0.95) saturate(0.95);
    transform: scale(0.98);
  }
}

@keyframes water-move {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

/* Color morphing animation for water - extremely gradual with many shades of blue */
@keyframes water-color-morph {
  0% {
    background: radial-gradient(circle, #00b8ff 0%, #0077cc 50%, #005599 100%);
    filter: brightness(1) saturate(1) contrast(1);
    transform: scale(1);
  }
  4% {
    background: radial-gradient(circle, #00b4fc 0%, #0075c9 50%, #005496 100%);
    filter: brightness(0.995) saturate(1.005) contrast(1.003);
    transform: scale(1.0005);
  }
  8% {
    background: radial-gradient(circle, #00b0f8 0%, #0074c6 50%, #005393 100%);
    filter: brightness(0.99) saturate(1.01) contrast(1.005);
    transform: scale(1.001);
  }
  12% {
    background: radial-gradient(circle, #00aaf4 0%, #0072c3 50%, #005290 100%);
    filter: brightness(0.985) saturate(1.015) contrast(1.008);
    transform: scale(1.0015);
  }
  16% {
    background: radial-gradient(circle, #00a4f0 0%, #0070c0 50%, #00518d 100%);
    filter: brightness(0.98) saturate(1.02) contrast(1.01);
    transform: scale(1.002);
  }
  20% {
    background: radial-gradient(circle, #009eeb 0%, #006ebd 50%, #00508a 100%);
    filter: brightness(0.975) saturate(1.025) contrast(1.015);
    transform: scale(1.0025);
  }
  24% {
    background: radial-gradient(circle, #0098e7 0%, #006cba 50%, #004f87 100%);
    filter: brightness(0.97) saturate(1.03) contrast(1.02);
    transform: scale(1.003);
  }
  28% {
    background: radial-gradient(circle, #0092e3 0%, #006ab7 50%, #004e84 100%);
    filter: brightness(0.98) saturate(1.025) contrast(1.015);
    transform: scale(1.0025);
  }
  32% {
    background: radial-gradient(circle, #008cdf 0%, #0068b4 50%, #004d81 100%);
    filter: brightness(0.99) saturate(1.02) contrast(1.01);
    transform: scale(1.002);
  }
  36% {
    background: radial-gradient(circle, #0086db 0%, #0066b1 50%, #004c7e 100%);
    filter: brightness(1) saturate(1.015) contrast(1.005);
    transform: scale(1.001);
  }
  40% {
    background: radial-gradient(circle, #0080d7 0%, #0064ae 50%, #004b7b 100%);
    filter: brightness(1.01) saturate(1.01) contrast(1);
    transform: scale(1);
  }
  44% {
    background: radial-gradient(circle, #007ad3 0%, #0062ab 50%, #004a78 100%);
    filter: brightness(1.005) saturate(1.015) contrast(1.005);
    transform: scale(0.9995);
  }
  48% {
    background: radial-gradient(circle, #0074cf 0%, #0060a8 50%, #004975 100%);
    filter: brightness(1) saturate(1.02) contrast(1.01);
    transform: scale(0.999);
  }
  52% {
    background: radial-gradient(circle, #006ecb 0%, #005ea5 50%, #004872 100%);
    filter: brightness(0.995) saturate(1.025) contrast(1.015);
    transform: scale(0.9985);
  }
  56% {
    background: radial-gradient(circle, #0068c7 0%, #005ca2 50%, #00476f 100%);
    filter: brightness(0.99) saturate(1.03) contrast(1.02);
    transform: scale(0.998);
  }
  60% {
    background: radial-gradient(circle, #0062c3 0%, #005a9f 50%, #00466c 100%);
    filter: brightness(0.995) saturate(1.025) contrast(1.015);
    transform: scale(0.9985);
  }
  64% {
    background: radial-gradient(circle, #005cbf 0%, #00589c 50%, #004569 100%);
    filter: brightness(1) saturate(1.02) contrast(1.01);
    transform: scale(0.999);
  }
  68% {
    background: radial-gradient(circle, #0056bb 0%, #005699 50%, #004466 100%);
    filter: brightness(1.005) saturate(1.015) contrast(1.005);
    transform: scale(0.9995);
  }
  72% {
    background: radial-gradient(circle, #0050b7 0%, #005496 50%, #004363 100%);
    filter: brightness(1.01) saturate(1.01) contrast(1);
    transform: scale(1);
  }
  76% {
    background: radial-gradient(circle, #005ab7 0%, #005796 50%, #004563 100%);
    filter: brightness(1.005) saturate(1.005) contrast(0.995);
    transform: scale(1.0005);
  }
  80% {
    background: radial-gradient(circle, #0064b7 0%, #005a96 50%, #004763 100%);
    filter: brightness(1) saturate(1) contrast(0.99);
    transform: scale(1.001);
  }
  84% {
    background: radial-gradient(circle, #006eb7 0%, #005d96 50%, #004963 100%);
    filter: brightness(0.995) saturate(0.995) contrast(0.985);
    transform: scale(1.0015);
  }
  88% {
    background: radial-gradient(circle, #0078b7 0%, #006096 50%, #004b63 100%);
    filter: brightness(0.99) saturate(0.99) contrast(0.98);
    transform: scale(1.002);
  }
  92% {
    background: radial-gradient(circle, #0082b7 0%, #006396 50%, #004d63 100%);
    filter: brightness(0.995) saturate(0.995) contrast(0.985);
    transform: scale(1.0015);
  }
  96% {
    background: radial-gradient(circle, #008cb7 0%, #006696 50%, #004f63 100%);
    filter: brightness(1) saturate(1) contrast(0.99);
    transform: scale(1.001);
  }
  100% {
    background: radial-gradient(circle, #0096b7 0%, #006996 50%, #005163 100%);
    filter: brightness(1) saturate(1) contrast(1);
    transform: scale(1);
  }
}

/* Water surface rippling animation - extremely slow and subtle */
@keyframes water-surface {
  0% {
    transform: rotate(0deg) scale(1) translateX(0px);
    opacity: 0.2;
    filter: blur(0px);
  }
  5% {
    transform: rotate(18deg) scale(1.01) translateX(0.5px);
    opacity: 0.205;
    filter: blur(0.1px);
  }
  10% {
    transform: rotate(36deg) scale(1.015) translateX(0.75px);
    opacity: 0.21;
    filter: blur(0.15px);
  }
  15% {
    transform: rotate(54deg) scale(1.02) translateX(1px);
    opacity: 0.215;
    filter: blur(0.2px);
  }
  20% {
    transform: rotate(72deg) scale(1.025) translateX(1.25px);
    opacity: 0.22;
    filter: blur(0.25px);
  }
  25% {
    transform: rotate(90deg) scale(1.03) translateX(1.5px);
    opacity: 0.225;
    filter: blur(0.3px);
  }
  30% {
    transform: rotate(108deg) scale(1.035) translateX(1.75px);
    opacity: 0.23;
    filter: blur(0.35px);
  }
  35% {
    transform: rotate(126deg) scale(1.04) translateX(1.5px);
    opacity: 0.235;
    filter: blur(0.4px);
  }
  40% {
    transform: rotate(144deg) scale(1.045) translateX(1.25px);
    opacity: 0.24;
    filter: blur(0.45px);
  }
  45% {
    transform: rotate(162deg) scale(1.05) translateX(0.75px);
    opacity: 0.245;
    filter: blur(0.5px);
  }
  50% {
    transform: rotate(180deg) scale(1.055) translateX(0px);
    opacity: 0.25;
    filter: blur(0.55px);
  }
  55% {
    transform: rotate(198deg) scale(1.05) translateX(-0.75px);
    opacity: 0.245;
    filter: blur(0.5px);
  }
  60% {
    transform: rotate(216deg) scale(1.045) translateX(-1.25px);
    opacity: 0.24;
    filter: blur(0.45px);
  }
  65% {
    transform: rotate(234deg) scale(1.04) translateX(-1.5px);
    opacity: 0.235;
    filter: blur(0.4px);
  }
  70% {
    transform: rotate(252deg) scale(1.035) translateX(-1.75px);
    opacity: 0.23;
    filter: blur(0.35px);
  }
  75% {
    transform: rotate(270deg) scale(1.03) translateX(-1.5px);
    opacity: 0.225;
    filter: blur(0.3px);
  }
  80% {
    transform: rotate(288deg) scale(1.025) translateX(-1.25px);
    opacity: 0.22;
    filter: blur(0.25px);
  }
  85% {
    transform: rotate(306deg) scale(1.02) translateX(-1px);
    opacity: 0.215;
    filter: blur(0.2px);
  }
  90% {
    transform: rotate(324deg) scale(1.015) translateX(-0.75px);
    opacity: 0.21;
    filter: blur(0.15px);
  }
  95% {
    transform: rotate(342deg) scale(1.01) translateX(-0.5px);
    opacity: 0.205;
    filter: blur(0.1px);
  }
  100% {
    transform: rotate(360deg) scale(1) translateX(0px);
    opacity: 0.2;
    filter: blur(0px);
  }
}

/* Fire kasina animation - bright glowing orange that transitions to yellow/white */
.fire-animation {
  animation: fire-glow 6s infinite alternate;
  box-shadow: 0 0 40px rgba(255, 102, 0, 0.8);
  position: relative;
  overflow: hidden;
}

.fire-animation::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: radial-gradient(circle, #ffffff 0%, #ffcc00 30%, #ff6600 70%, #ff3300 100%);
  opacity: 0.7;
  animation: fire-flicker 3s infinite alternate;
}

@keyframes fire-glow {
  0% {
    filter: brightness(0.9);
    box-shadow: 0 0 30px rgba(255, 102, 0, 0.6);
  }
  50% {
    filter: brightness(1.4);
    box-shadow: 0 0 50px rgba(255, 150, 0, 0.9);
  }
  100% {
    filter: brightness(1);
    box-shadow: 0 0 40px rgba(255, 102, 0, 0.8);
  }
}

@keyframes fire-flicker {
  0% {
    opacity: 0.7;
    transform: scale(0.98);
  }
  25% {
    opacity: 0.8;
  }
  50% {
    opacity: 0.9;
    transform: scale(1.02);
  }
  75% {
    opacity: 0.8;
  }
  100% {
    opacity: 0.7;
    transform: scale(0.98);
  }
}

/* Air kasina animation - semi-transparent and swept by the air */
.air-animation {
  animation: air-float 10s infinite ease-in-out;
  box-shadow: 0 0 30px rgba(60, 180, 255, 0.7);
  position: relative;
  overflow: hidden;
  border: none !important; /* Remove border to fix edge artifacts */
  backdrop-filter: blur(1px); /* Add subtle blur for airy effect */
  background: linear-gradient(135deg, #a0d6f7 0%, #78c6ff 100%); /* Base blue gradient */
}

/* Add a second wind/mist layer to enhance the airy quality */
.air-animation::after {
  content: '';
  position: absolute;
  top: -20%;
  left: -20%;
  width: 140%;
  height: 140%;
  border-radius: 50%;
  background: 
    linear-gradient(
      135deg, 
      rgba(255, 255, 255, 0.4) 0%, 
      rgba(170, 220, 255, 0.2) 50%, 
      rgba(120, 200, 255, 0.1) 100%
    ),
    /* Wind streaks */
    repeating-linear-gradient(
      80deg,
      transparent,
      transparent 10px,
      rgba(255, 255, 255, 0.06) 10px,
      rgba(255, 255, 255, 0.06) 12px,
      transparent 12px,
      transparent 14px
    ),
    repeating-linear-gradient(
      170deg,
      transparent,
      transparent 15px,
      rgba(255, 255, 255, 0.04) 15px,
      rgba(255, 255, 255, 0.04) 17px
    );
  opacity: 0.7;
  animation: air-mist 25s infinite linear;
  pointer-events: none;
}

.air-animation::before {
  content: '';
  position: absolute;
  top: -10%;  /* Extend past the borders to avoid artifacts */
  left: -10%;
  width: 120%; /* Wider than container to ensure no edge artifacts */
  height: 120%;
  border-radius: 50%; /* Keep the circular shape */
  background: 
    radial-gradient(
      circle, 
      rgba(124, 195, 255, 0.7) 0%, 
      rgba(160, 214, 247, 0.65) 50%, 
      rgba(113, 175, 232, 0.5) 100%
    );
  opacity: 0.9;
  animation: air-swirl 15s infinite linear;
}

@keyframes air-float {
  0% {
    transform: translateY(0) scale(1);
    opacity: 0.7;
  }
  25% {
    transform: translateY(-5px) translateX(2px) scale(1.01);
    opacity: 0.8;
  }
  50% {
    transform: translateY(-10px) scale(1.02);
    opacity: 0.85;
  }
  75% {
    transform: translateY(-5px) translateX(-2px) scale(1.01);
    opacity: 0.8;
  }
  100% {
    transform: translateY(0) scale(1);
    opacity: 0.7;
  }
}

@keyframes air-swirl {
  0% {
    transform: rotate(0deg) scale(1);
    filter: blur(0px);
  }
  25% {
    transform: rotate(2deg) scale(1.02);
    filter: blur(0.5px);
  }
  33% {
    transform: rotate(5deg) scale(1.03);
    filter: blur(1px);
  }
  50% {
    transform: rotate(3deg) scale(1.01);
    filter: blur(0.5px);
  }
  66% {
    transform: rotate(-5deg) scale(0.97);
    filter: blur(1px);
  }
  75% {
    transform: rotate(-2deg) scale(0.99);
    filter: blur(0.5px);
  }
  100% {
    transform: rotate(0deg) scale(1);
    filter: blur(0px);
  }
}

@keyframes air-mist {
  0% {
    transform: rotate(0deg) scale(1) translateX(0px);
    opacity: 0.3;
    filter: blur(0px);
  }
  20% {
    transform: rotate(80deg) scale(1.05) translateX(5px);
    opacity: 0.6;
    filter: blur(1px);
  }
  30% {
    transform: rotate(120deg) scale(1.1) translateX(2px);
    opacity: 0.5;
    filter: blur(2px);
  }
  50% {
    transform: rotate(180deg) scale(1) translateX(-3px);
    opacity: 0.4;
    filter: blur(1.5px);
  }
  60% {
    transform: rotate(240deg) scale(0.95) translateX(-6px);
    opacity: 0.6;
    filter: blur(2px);
  }
  80% {
    transform: rotate(300deg) scale(1.02) translateX(-2px);
    opacity: 0.5;
    filter: blur(1px);
  }
  100% {
    transform: rotate(360deg) scale(1) translateX(0px);
    opacity: 0.4;
    filter: blur(0px);
  }
}

/* Earth kasina animation - deep terracotta with subtle pulsing */
.earth-animation {
  animation: earth-pulse 12s infinite ease-in-out;
  box-shadow: 0 0 20px rgba(153, 51, 0, 0.6);
  position: relative;
  overflow: hidden;
}

.earth-animation::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: radial-gradient(circle, #cc6633 0%, #993300 50%, #662200 100%);
  opacity: 0.8;
  animation: earth-texture 30s infinite linear;
}

@keyframes earth-pulse {
  0% {
    filter: brightness(0.9);
    transform: scale(0.99);
  }
  50% {
    filter: brightness(1.05);
    transform: scale(1.01);
  }
  100% {
    filter: brightness(0.9);
    transform: scale(0.99);
  }
}

@keyframes earth-texture {
  0% {
    transform: rotate(0deg) scale(1);
  }
  100% {
    transform: rotate(360deg) scale(1);
  }
}

/* Space kasina animation - inverted: black orb with dark purple background */
.space-animation {
  animation: 
    space-pulse 15s infinite alternate,
    space-breathe 15s infinite cubic-bezier(0.4, 0, 0.6, 1); /* Slower, more deliberate expansion/contraction */
  /* Outer purple glow */
  box-shadow: 0 0 40px rgba(51, 0, 102, 0.8); /* Enhanced glow */
  position: relative;
  overflow: visible; /* Allow expansion to be visible beyond boundaries */
  /* Purple background with slightly smoother shade */
  background-color: #2a0055;
  transform-origin: center; /* Ensure expansion happens from center */
  will-change: transform; /* Optimize for animation performance */
  border-radius: 50% !important; /* Always maintain circular shape */
}

.space-animation::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  /* Black center with very slight dark purple gradient for depth */
  background: radial-gradient(ellipse at center, #000000 0%, #0a0011 60%, #110022 100%);
  opacity: 0.95;
  animation: 
    space-nebula 30s infinite linear,
    space-breathe 15s infinite cubic-bezier(0.4, 0, 0.6, 1); /* Match parent animation timing */
  transform-origin: center;
  will-change: transform;
  border-radius: 50%; /* Keep pseudo-element circular too */
}

.space-animation::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  /* Removed the white specks/stars */
  background-image: none;
  opacity: 0;
  animation: none;
  border-radius: 50%; /* Keep circular */
}

@keyframes space-pulse {
  0% {
    filter: brightness(0.8) contrast(1.3);
    box-shadow: 0 0 35px rgba(51, 0, 102, 0.6);
  }
  50% {
    filter: brightness(1) contrast(1.5);
    box-shadow: 0 0 45px rgba(51, 0, 102, 0.8);
  }
  100% {
    filter: brightness(0.9) contrast(1.3);
    box-shadow: 0 0 35px rgba(51, 0, 102, 0.6);
  }
}

/* Space expansion/contraction breathing effect - 15 seconds cycle */
@keyframes space-breathe {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.3); /* Expand to 130% (30% growth) to make it very noticeable */
  }
  100% {
    transform: scale(1);
  }
}

/* Special class to apply directly to elements in focus mode for guaranteed animation */
.kasina-space-breathe-effect {
  animation: space-breathe 15s infinite cubic-bezier(0.4, 0, 0.6, 1) !important;
  transform-origin: center !important;
  will-change: transform !important;
  border-radius: 50% !important; /* Ensure it stays circular */
}

@keyframes space-nebula {
  0% {
    transform: rotate(0deg);
    opacity: 0.98;
  }
  50% {
    transform: rotate(180deg);
    opacity: 0.95;
  }
  100% {
    transform: rotate(360deg);
    opacity: 0.98;
  }
}

@keyframes space-stars {
  0% {
    opacity: 0.3;
    transform: rotate(0deg);
  }
  50% {
    opacity: 0.6;
  }
  100% {
    opacity: 0.3;
    transform: rotate(360deg);
  }
}

/* Light kasina animation - cycles between brilliance and shadow to explore the concept of light */
.light-animation {
  animation: light-cycle 20s infinite alternate ease-in-out;
  box-shadow: 0 0 45px rgba(255, 255, 240, 0.9);
  position: relative;
  overflow: hidden;
}

/* Primary light layer */
.light-animation::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: radial-gradient(circle, #ffffff 0%, #ffffcc 50%, #ffff99 80%, #fffee6 100%);
  opacity: 0.8;
  animation: light-pulse 15s infinite alternate ease-in-out;
  mix-blend-mode: normal;
}

/* Shadow/contrast layer that moves across the light */
.light-animation::after {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: 
    radial-gradient(
      ellipse at center, 
      rgba(0, 0, 0, 0) 30%, 
      rgba(0, 0, 0, 0.05) 50%, 
      rgba(0, 0, 0, 0.1) 70%, 
      rgba(0, 0, 0, 0.15) 100%
    ),
    /* Subtle shadow patterns */
    repeating-linear-gradient(
      30deg,
      transparent 0%,
      transparent 2%,
      rgba(0, 0, 0, 0.02) 2.5%,
      transparent 3%
    ),
    repeating-linear-gradient(
      150deg,
      transparent 0%,
      transparent 1.5%,
      rgba(0, 0, 0, 0.01) 2%,
      transparent 2.5%
    );
  opacity: 0.7;
  transform-origin: center;
  animation: 
    shadow-traverse 30s infinite linear,
    shadow-opacity 20s infinite alternate ease-in-out;
  mix-blend-mode: multiply;
}

@keyframes light-cycle {
  0% {
    background-color: #ffffff;
    box-shadow: 0 0 40px rgba(255, 255, 255, 0.9);
    filter: brightness(1) contrast(1);
  }
  20% {
    background-color: #ffffee;
    box-shadow: 0 0 60px rgba(255, 255, 222, 0.95);
    filter: brightness(1.1) contrast(0.95);
  }
  40% {
    background-color: #ffffaa;
    box-shadow: 0 0 70px rgba(255, 255, 170, 0.9);
    filter: brightness(1.2) contrast(0.9);
  }
  60% {
    background-color: #fff8e0;
    box-shadow: 0 0 50px rgba(255, 248, 224, 0.8);
    filter: brightness(0.95) contrast(1.05);
  }
  80% {
    background-color: #ffffe0;
    box-shadow: 0 0 40px rgba(255, 255, 224, 0.7);
    filter: brightness(0.9) contrast(1.1);
  }
  100% {
    background-color: #ffffd6;
    box-shadow: 0 0 55px rgba(255, 255, 214, 0.85);
    filter: brightness(1) contrast(1);
  }
}

@keyframes light-pulse {
  0% {
    opacity: 0.75;
    transform: scale(0.95);
    filter: brightness(1.05) contrast(0.95);
  }
  25% {
    opacity: 0.9;
    transform: scale(1.02);
    filter: brightness(1.1) contrast(0.9);
  }
  50% {
    opacity: 0.95;
    transform: scale(1.05);
    filter: brightness(1.15) contrast(0.85);
  }
  75% {
    opacity: 0.85;
    transform: scale(0.98);
    filter: brightness(1) contrast(1.05);
  }
  100% {
    opacity: 0.8;
    transform: scale(1);
    filter: brightness(0.95) contrast(1.1);
  }
}

/* Shadow effect that passes across the light */
@keyframes shadow-traverse {
  0% {
    transform: rotate(0deg) scale(1);
  }
  100% {
    transform: rotate(360deg) scale(1.2);
  }
}

/* Shadow opacity that pulses */
@keyframes shadow-opacity {
  0% {
    opacity: 0.3;
    filter: blur(10px);
  }
  20% {
    opacity: 0.2;
    filter: blur(5px);
  }
  40% {
    opacity: 0.1;
    filter: blur(3px);
  }
  60% {
    opacity: 0.15;
    filter: blur(7px);
  }
  80% {
    opacity: 0.25;
    filter: blur(10px);
  }
  100% {
    opacity: 0.35;
    filter: blur(12px);
  }
}